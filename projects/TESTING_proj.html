<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Interactive Point Map</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    label {
      margin-right: 10px;
    }
    #mapCanvas {
      border: 2px solid #333;
      cursor: pointer;
      display: block;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <label>
    Label:
    <input id="pointLabel" type="text" placeholder="Enter point label" />
  </label>
  <button id="addPointBtn">Add Point</button>
  <button id="deletePointBtn">Delete Selected Point</button>

  <canvas id="mapCanvas" width="500" height="400"></canvas>

  <script>
    const canvas = document.getElementById('mapCanvas');
    const ctx = canvas.getContext('2d');

    let points = [];
    let selectedPoint = null;
    let draggingPoint = null;
    let dragOffsetX = 0;
    let dragOffsetY = 0;
    const POINT_RADIUS = 15;

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      points.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, POINT_RADIUS, 0, Math.PI * 2);
        ctx.fillStyle = p === selectedPoint ? '#e74c3c' : '#f39c12';
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.stroke();

        ctx.fillStyle = '#fff';
        ctx.font = '12px sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(p.label, p.x, p.y);
      });
    }

    function addPoint() {
      const input = document.getElementById('pointLabel');
      const label = input.value.trim();
      if (!label) {
        alert('Please enter a label.');
        return;
      }
      const pt = { x: 100, y: 100, label };
      points.push(pt);
      selectedPoint = pt;
      input.value = '';
      draw();
    }

    function deletePoint() {
      if (!selectedPoint) return;
      points = points.filter(p => p !== selectedPoint);
      selectedPoint = null;
      draw();
    }

    function getPointAt(x, y) {
      for (let i = points.length - 1; i >= 0; i--) {
        const p = points[i];
        const dx = x - p.x;
        const dy = y - p.y;
        if (Math.hypot(dx, dy) <= POINT_RADIUS) {
          return p;
        }
      }
      return null;
    }

    canvas.addEventListener('mousedown', e => {
      const rect = canvas.getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;
      const hit = getPointAt(mx, my);

      if (hit) {
        draggingPoint = hit;
        selectedPoint = hit;
        dragOffsetX = mx - hit.x;
        dragOffsetY = my - hit.y;
      } else {
        selectedPoint = null;
      }
      draw();
    });

    canvas.addEventListener('mousemove', e => {
      if (!draggingPoint) return;
      const rect = canvas.getBoundingClientRect();
      draggingPoint.x = e.clientX - rect.left - dragOffsetX;
      draggingPoint.y = e.clientY - rect.top - dragOffsetY;
      draw();
    });

    ['mouseup', 'mouseleave'].forEach(evt =>
      canvas.addEventListener(evt, () => {
        draggingPoint = null;
      })
    );

    document.getElementById('addPointBtn').addEventListener('click', addPoint);
    document.getElementById('deletePointBtn').addEventListener('click', deletePoint);

    draw();
  </script>

</body>
</html>
